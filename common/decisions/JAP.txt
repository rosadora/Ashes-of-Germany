
JAP_1936_elections = {

	JAP_1936_election_day = {

		icon = GFX_decision_generic_political_rally

		allowed = {
			tag = JAP
		}

		available = {
			always = no
		}

		days_mission_timeout = 105
		fire_only_once = yes

		activation = {
          NOT = {
			has_global_flag = japanese_1936_elections
		  }
		}

		cancel_trigger = {
			OR = {
				has_completed_focus = JAP_kodoha_coup
				has_completed_focus = JAP_hanran
			}
		}

		is_good = no

		timeout_effect = {
			country_event = {
				id = jap.1
				days = 1
			}
		}

		ai_will_do = {
			factor = 1
		}
	}
	JAP_sue_for_peace_CHI = {

		allowed = {
			original_tag = JAP
		}

		available = {
			FROM = { 
				surrender_progress < 0.2 # if they are losing, lets not allow it
			}
			custom_trigger_tooltip = {
				tooltip = JAP_sue_for_peace_TT
				NOT = {
					# South Korea
					controls_state = 525
					# North Korea
					controls_state = 527
				}
				NOT = {
					any_of = {
						array = CHI.core_states
						var:v = {
							NOT = {
								state = 524
							}
							controller = {
								OR = {
									tag = JAP
									AND = {
										is_subject_of = JAP
										OR = {
											tag = MEN
											tag = MAN
										}
									}
								}
							}
						}
					}
				}
				MAN = {
					OR = {
						exists = no
						NOT = {
							is_subject_of = JAP
						}
						has_capitulated = yes
					}
				}
			}
		}

		target_array = enemies

		target_trigger = {
			#Target is FROM
			FROM = {
				tag = event_target:WTT_current_china_leader
				has_war_with = ROOT
			}
		}

		visible = {
			FROM = { 
				exists = yes 
				is_subject = no
			}
			is_subject = no
			any_enemy_country = {
				is_literally_china = yes
			}
		}

		cost = 0

		fire_only_once = yes

		ai_will_do = {
			factor = 400
		}

		complete_effect = {
			event_target:WTT_current_china_leader = {
				country_event = { 
					id = wtt_japan.126 
					days = 1 
				}
			}
		}
	}

	JAP_sue_for_peace_MAN = {

		allowed = {
			original_tag = JAP
		}

		available = {
			FROM = { 
				surrender_progress < 0.2 # if they are losing, lets not allow it
			}
			custom_trigger_tooltip = {
				tooltip = JAP_sue_for_peace_TT
				NOT = {
					controls_state = 525
					controls_state = 527
				}
				NOT = {
					any_of = {
						array = CHI.core_states
						var:v = {
							NOT = {
								state = 524
							}
							controller = {
								OR = {
									tag = JAP
									AND = {
										is_subject_of = JAP
										tag = MEN
									}
								}
							}
						}
					}
				}
			}
		}


		target_trigger = {
			#Target is FROM
			FROM = {
				tag = MAN
				has_war_with = ROOT
			}
		}

		visible = {
			FROM = { 
				exists = yes 
				is_subject = no
			}
			is_subject = no
			has_war_with = FROM
		}

		cost = 0

		fire_only_once = yes

		ai_will_do = {
			base = 400
			modifier = {
				factor = 0
				casualties_inflicted_by = {
					opponent = MAN
					thousands < 300
				}
			}

			modifier = {
				factor = 0
				NOT = {has_country_flag = JAP_dont_surrender_instantly_lock}
			}
		}

		complete_effect = {
			MAN = {
				country_event = { id = wtt_japan.129 days = 1 }
			}
		}
	}

	JAP_sue_for_peace_nuke = {

		allowed = {
			original_tag = JAP
		}

		available = {
			has_global_flag = JAP_nuke_1
			has_global_flag = JAP_nuke_2
			has_navy_size = { size < 40 }
			NOT = {
				controls_state = 526
				controls_state = 645
			}
		}

		visible = {
			has_war = yes
			has_global_flag = JAP_nuke_1
		}

		cost = 0

		days_remove = -1
		ai_will_do = {
			factor = 10
			modifier = {
				NOT = {
					controls_state = 525
					controls_state = 527
				}
				factor = 10
			}
		}

		modifier = {
			forced_surrender_limit = -1.0
		}

		remove_effect = {

		}

		remove_trigger = {
			has_war = no
		}
		complete_effect = {
			hidden_effect = {
				clr_global_flag = JAP_nuke_1
				clr_global_flag = JAP_nuke_2
			}
		}
	}
	JAP_sue_for_peace_nuke_mission = {
		available = {
			has_global_flag = JAP_nuke_1
			has_global_flag = JAP_nuke_2
		}

		visible = {
			NOT = {
				OR = {
					controls_state = 536
					controls_state = 533
					controls_state = 534
					controls_state = 532
					controls_state = 282
					controls_state = 530
					controls_state = 531
					controls_state = 528
					controls_state = 529
				}
			}
		}

		modifier = {
			
		}

		days_mission_timeout = 720
		fire_only_once = yes

		activation = {
			is_special_project_completed = sp:sp_nuclear_bomb
			has_war_with = JAP
		}

		complete_effect = {
			JAP = {
				unlock_decision_tooltip = JAP_sue_for_peace_nuke
			}
		}
	}
}

JAP_balance_of_power_category = {

	JAP_protracted_warfare_tactics = {

		icon = GFX_decision_CHL_mapuche_liberate_inuit
        allowed = {
            tag = JAP
        }
        visible = {
			OR = {
			has_government = classical_marxism
			has_government = libertarian_socialism
			has_government = communism
			}
			has_civil_war = yes
        }
        priority = 1000

		days_remove = 50
	    days_re_enable = 1
        fire_only_once = yes

		ai_will_do = {
			factor = 1000
		}

		cost = 30

        modifier = {
			army_core_defence_factor = 0.1
        }

		complete_effect = {
			add_power_balance_value = {
              id = JAP_power_balance
              value = 0.075
            }
		}
    }
	JAP_raise_peasant_militia = {

		icon = GFX_decision_generic_civil_support
        allowed = {
            tag = JAP
        }
        visible = {
			OR = {
			has_government = classical_marxism
			has_government = libertarian_socialism
			has_government = communism
			}
			has_civil_war = yes
        }
        priority = 1000

		days_remove = 50
	    days_re_enable = 1
        fire_only_once = yes

		ai_will_do = {
			factor = 1000
		}

		cost = 30

        modifier = {
			weekly_manpower = 1000
        }

		complete_effect = {
			add_power_balance_value = {
              id = JAP_power_balance
              value = 0.075
            }
			random_controlled_state = {
				limit = {
					is_core_of = JAP
				}
			 create_unit = {
              division = "name = \"Peasant Militia\" division_template = \"Peasant Militia\" start_experience_factor = 0.5"
              owner = JAP
             }
			}
			random_controlled_state = {
				limit = {
					is_core_of = JAP
				}
			 create_unit = {
              division = "name = \"Peasant Militia\" division_template = \"Peasant Militia\" start_experience_factor = 0.5"
              owner = JAP
             }
			}
			random_controlled_state = {
				limit = {
					is_core_of = JAP
				}
			 create_unit = {
              division = "name = \"Peasant Militia\" division_template = \"Peasant Militia\" start_experience_factor = 0.5"
              owner = JAP
             }
			}
		}
    }
	JAP_rally_womens_movement = {

		icon = GFX_decision_generic_speech
        allowed = {
            tag = JAP
        }
        visible = {
			OR = {
			has_government = classical_marxism
			has_government = libertarian_socialism
			has_government = communism
			}
			has_civil_war = yes
        }
        priority = 1000

		days_remove = 50
	    days_re_enable = 1
        fire_only_once = yes

		ai_will_do = {
			factor = 1000
		}

		cost = 30

        modifier = {
			weekly_manpower = 3000
			stability_weekly = 0.005
			political_power_factor = 0.15
        }

		complete_effect = {
			add_power_balance_value = {
              id = JAP_power_balance
              value = -0.075
            }
		}
    }
	JAP_insist_on_collective_leadership = {

		icon = GFX_decision_SOV_the_workers_dictatorship
        allowed = {
            tag = JAP
        }
        visible = {
			OR = {
			has_government = classical_marxism
			has_government = libertarian_socialism
			has_government = communism
			}
			has_civil_war = yes
        }
        priority = 1000

		days_remove = 50
	    days_re_enable = 1
        fire_only_once = yes

		ai_will_do = {
			factor = 1000
		}

		cost = 30

        modifier = {
			war_support_weekly = 0.005
			political_power_factor = 0.15
        }

		complete_effect = {
			add_power_balance_value = {
              id = JAP_power_balance
              value = -0.075
            }
			random_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
    }
	JAP_ally_communist_china = {

		icon = GFX_decision_hol_exchange_intelligence_data
        allowed = {
            tag = JAP
        }
        visible = {
			OR = {
			has_government = classical_marxism
			has_government = libertarian_socialism
			has_government = communism
			}
        }
		available = {
			has_civil_war = no
			country_exists = PRC
			has_completed_focus = JAP_support_mao
		}
        priority = 1000

		days_remove = 10
	    days_re_enable = 10
        fire_only_once = yes

		ai_will_do = {
			factor = 1000
		}

		cost = 50

        complete_effect = {
		 add_power_balance_value = {
              id = JAP_power_balance
              value = 0.1
            }
		 PRC = {
			country_event = {
				id = jap.2
				days = 1
			}
		 }
        }
    }
	JAP_give_weapons_to_wpk = {

		icon = GFX_decision_hol_exchange_intelligence_data
        allowed = {
            tag = JAP
        }
        visible = {
			OR = {
			has_government = classical_marxism
			has_government = libertarian_socialism
			has_government = communism
			}
			KOR = {
				NOT = {
					OR = {
			          has_government = classical_marxism
			          has_government = libertarian_socialism
			          has_government = communism
			        }
				}
			}
			has_completed_focus = JAP_limited_interventionism
        }
		available = {
			has_civil_war = no
			country_exists = KOR
			has_completed_focus = JAP_ties_with_the_wpk
		}
        priority = 1000

		days_remove = 10
	    days_re_enable = 10
        fire_only_once = yes

		ai_will_do = {
			factor = 1000
		}

		cost = 50

        complete_effect = {
         KOR = {
			add_timed_idea = {
				idea = japanese_ingerence
				days = 400
			}
		 }
        }
    }
	JAP_liberate_workers_of_korea = {

		icon = GFX_decision_hol_exchange_intelligence_data
        allowed = {
            tag = JAP
        }
        visible = {
			OR = {
			has_government = classical_marxism
			has_government = libertarian_socialism
			has_government = communism
			}
			KOR = {
				NOT = {
					OR = {
			          has_government = classical_marxism
			          has_government = libertarian_socialism
			          has_government = communism
			        }
				}
			}
			has_completed_focus = JAP_red_wind
        }
		available = {
			has_army_manpower = {
				size > 400000
			}
			has_civil_war = no
			has_completed_focus = JAP_ties_with_the_wpk
		}
        priority = 1000

		days_remove = 10
	    days_re_enable = 10
        fire_only_once = yes
		will_lead_to_war_with = KOR

		ai_will_do = {
			factor = 1000
		}

		cost = 50

        complete_effect = {
         create_wargoal = {
            target = KOR
            type = puppet_wargoal_focus
         }
        }
    }
	JAP_establish_peoples_republic = {

		icon = GFX_decision_hol_exchange_intelligence_data
        allowed = {
            tag = JAP
        }
        visible = {
			OR = {
			has_government = classical_marxism
			has_government = libertarian_socialism
			has_government = communism
			}
        }
		available = {
			has_civil_war = no
			country_exists = PRC
			has_army_manpower = {
				size > 600000
			}
			has_completed_focus = JAP_support_mao
		}
        priority = 1000

		days_remove = 10
	    days_re_enable = 10
        fire_only_once = yes
		will_lead_to_war_with = MEN
		will_lead_to_war_with = MAN

		ai_will_do = {
			factor = 1000
		}

		cost = 50

        complete_effect = {
			add_power_balance_value = {
              id = JAP_power_balance
              value = 0.1
            }
		 create_wargoal = {
            target = MAN
            type = annex_everything
         }
		 create_wargoal = {
            target = MEN
            type = annex_everything
         }
        }
    }
	JAP_joint_attack = {

		icon = GFX_decision_hol_exchange_intelligence_data
        allowed = {
            tag = JAP
        }
        visible = {
			OR = {
			has_government = classical_marxism
			has_government = libertarian_socialism
			has_government = communism
			}
			has_completed_focus = JAP_support_mao
        }
		available = {
			has_civil_war = no
			country_exists = PRC
			has_army_manpower = {
				size > 1000000
			}
		}
        priority = 1000

		days_remove = 10
	    days_re_enable = 10
        fire_only_once = yes
		will_lead_to_war_with = CHI
		will_lead_to_war_with = SHX
		will_lead_to_war_with = YUN
		will_lead_to_war_with = GXC
		will_lead_to_war_with = XSM

		ai_will_do = {
			factor = 1000
		}

		cost = 50

        complete_effect = {
			add_power_balance_value = {
              id = JAP_power_balance
              value = 0.1
            }
         create_wargoal = {
            target = CHI
            type = annex_everything
         }
		 create_wargoal = {
            target = SHX
            type = annex_everything
         }
		 create_wargoal = {
            target = SHX
            type = annex_everything
         }
		 create_wargoal = {
            target = YUN
            type = annex_everything
         }
		 create_wargoal = {
            target = GXC
            type = annex_everything
         }
		 create_wargoal = {
            target = XSM
            type = annex_everything
         }
        }
    }
	JAP_recover_far_eastern_republic = {

		icon = GFX_decision_eng_trade_unions_demand
        allowed = {
            tag = JAP
        }
        visible = {
			has_completed_focus = JAP_red_wind
        }
		available = {
			NOT = {
				FER = {
					is_puppet_of = JAP
				}
			}
			has_completed_focus = JAP_secure_vladivostok
		}
        priority = 1000

		days_remove = 10
	    days_re_enable = 10
        fire_only_once = yes
		will_lead_to_war_with = FER

		ai_will_do = {
			factor = 1000
		}

		cost = 50

        complete_effect = {
         create_wargoal = {
            target = FER
            type = puppet_wargoal_focus
         }
        }
    }
	JAP_stage_a_coup_in_vladivostok = {

		icon = GFX_decision_hol_exchange_intelligence_data
        allowed = {
            tag = JAP
        }
        visible = {
			has_completed_focus = JAP_limited_interventionism
        }
		available = {
			country_exists = FER
			has_completed_focus = JAP_secure_vladivostok
		}
        priority = 1000

		days_remove = 10
	    days_re_enable = 10
        fire_only_once = yes

		ai_will_do = {
			factor = 1000
		}

		cost = 50

        complete_effect = {
         FER = {
			add_timed_idea = {
				idea = japanese_ingerence
				days = 400
			}
		 }
        }
    }
	JAP_coup_in_vladivostok = {

		icon = GFX_decision_hol_exchange_intelligence_data
        allowed = {
            tag = JAP
        }
        visible = {
			has_completed_focus = JAP_limited_interventionism
        }
		available = {
			country_exists = FER
			has_completed_focus = JAP_secure_vladivostok
			FER = {
				classical_marxism > 0.3
			}
		}
        priority = 1000

		days_remove = 10
	    days_re_enable = 10
        fire_only_once = yes

		ai_will_do = {
			factor = 1000
		}

		cost = 50

        complete_effect = {
         FER = {
			set_politics = {
				ruling_party = classical_marxism
				elections_allowed = no
			}
		 }
        }
    }
	JAP_revolutionary_thought_in_siam = {

		icon = GFX_decision_hol_exchange_intelligence_data
        allowed = {
            tag = JAP
        }
        visible = {
			has_completed_focus = JAP_limited_interventionism
        }
		available = {
			country_exists = SIA
			has_completed_focus = JAP_overthrow_siamese_government
		}
        priority = 1000

		days_remove = 10
	    days_re_enable = 10
        fire_only_once = yes

		ai_will_do = {
			factor = 1000
		}

		cost = 50

        complete_effect = {
         SIA = {
			add_timed_idea = {
				idea = japanese_ingerence
				days = 400
			}
		 }
        }
    }
	JAP_coup_in_bangkok = {

		icon = GFX_decision_hol_exchange_intelligence_data
        allowed = {
            tag = JAP
        }
        visible = {
			has_completed_focus = JAP_limited_interventionism
        }
		available = {
			country_exists = SIA
			has_completed_focus = JAP_overthrow_siamese_government
			SIA = {
				classical_marxism > 0.3
			}
		}
        priority = 1000

		days_remove = 10
	    days_re_enable = 10
        fire_only_once = yes

		ai_will_do = {
			factor = 1000
		}

		cost = 50

        complete_effect = {
         SIA = {
			set_politics = {
				ruling_party = classical_marxism
				elections_allowed = no
			}
		 }
        }
    }
	JAP_overthrow_siam = {

		icon = GFX_decision_hol_exchange_intelligence_data
        allowed = {
            tag = JAP
        }
        visible = {
			has_completed_focus = JAP_red_wind
        }
		available = {
			country_exists = SIA
			has_completed_focus = JAP_overthrow_siamese_government
		}
        priority = 1000

		days_remove = 10
	    days_re_enable = 10
        fire_only_once = yes

		ai_will_do = {
			factor = 1000
		}

		cost = 50

        complete_effect = {
         create_wargoal = {
            target = SIA
            type = puppet_wargoal_focus
         }
        }
    }
}